<!doctype html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Compressore immagini - Codedge</title>
    <meta
      name="description"
      content="Riduci il peso delle immagini senza perdere qualità con il nostro compressore online. Ottimizza JPG PNG WebP AVIF per siti web più veloci."
    />
    <link
      rel="canonical"
      href="https://codedge.it/strumenti/compressore-immagini/"
    />
    <link
      rel="icon"
      href="/assets/icons/codedge-logo-minimal.svg"
      sizes="any"
      type="image/svg+xml"
    />
    <link
      rel="icon"
      href="/assets/icons/favicon-32.png"
      sizes="32x32"
      type="image/png"
    />
    <link
      rel="icon"
      href="/assets/icons/favicon-16.png"
      sizes="16x16"
      type="image/png"
    />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link
      rel="icon"
      href="/assets/icons/android-chrome-192.png"
      sizes="192x192"
      type="image/png"
    />
    <link
      rel="icon"
      href="/assets/icons/android-chrome-512.png"
      sizes="512x512"
      type="image/png"
    />
    <link
      rel="apple-touch-icon"
      href="/assets/icons/apple-touch-icon.png"
      sizes="180x180"
    />
    <link rel="manifest" href="/site.webmanifest" />
    <link
      rel="mask-icon"
      href="/assets/icons/favicon-mask.svg"
      color="#00A8FF"
    />
    <meta name="theme-color" content="#00A8FF" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../../css/components/navbar.css" />
    <link rel="stylesheet" href="../../css/components/button.css" />
    <link rel="stylesheet" href="../../css/components/footer.css" />
    <link rel="stylesheet" href="../../css/components/main.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/compressorjs/1.1.1/compressor.min.js"></script>
    <script src="../../js/components/navbar.js" defer=""></script>
    <script src="../../js/components/button.js" defer=""></script>
    <script src="../../js/components/footer.js"></script>
    <script src="../../js/components/navbar-loader.js"></script>
    <style>
      .upload-area:hover,
      body {
        background-color: var(--background-one);
      }
      h1 .fa-compress-arrows-alt,
      select {
        margin-right: 10px;
      }
      h2 {
        font-size: 1.5rem;
        margin: 20px;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
        background-color: var(--background-two);
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        min-height: 500px;
      }
      .upload-area,
      h2 {
        text-align: center;
      }
      .upload-area {
        border: 2px dashed var(--color-three);
        border-radius: 8px;
        padding: 20px;
        cursor: pointer;
      }
      #fileInput {
        display: none;
      }
      .option-row,
      .options,
      .upload-area {
        margin-bottom: 20px;
      }
      .option-row {
        display: flex;
        align-items: center;
      }
      .option-label {
        width: 70px;
        text-align: left;
        margin-right: 10px;
        flex-shrink: 0;
      }
      .output-controls {
        display: flex;
        align-items: center;
      }
      select {
        padding: 8px;
        background-color: var(--background-one);
        color: var(--text-color);
        border: 1px solid var(--color-three);
        border-radius: 4px;
        -webkit-appearance: none;
        appearance: none;
      }
      #saveToButton:disabled {
        background-color: var(--color-two);
        width: 30%;
        margin-left: 40px;
        cursor: not-allowed;
      }
      #saveToButton {
        width: 30%;
        margin-left: 40px;
      }
      #compressBtn {
        position: relative;
        width: 100%;
      }
      .slider-container {
        display: flex;
        align-items: center;
        width: 100%;
      }
      .value-input {
        width: 60px;
        text-align: center;
        margin-right: 10px;
        background-color: var(--background-one);
        color: var(--text-color);
        border: 1px solid var(--color-three);
        border-radius: 4px;
        padding: 5px;
      }
      .slider-wrapper {
        flex-grow: 1;
        position: relative;
        height: 16px;
        display: flex;
        align-items: center;
      }
      .slider {
        appearance: none;
        -webkit-appearance: none;
        width: 100%;
        height: 4px;
        background: var(--color-two);
        outline: 0;
        margin: 0;
        padding: 0;
        z-index: 2;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
      }
      .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 16px;
        height: 16px;
        background: var(--color-three);
        cursor: pointer;
        border-radius: 50%;
        position: relative;
        z-index: 3;
      }
      .slider::-moz-range-thumb {
        width: 16px;
        height: 16px;
        background: var(--color-three);
        cursor: pointer;
        border-radius: 50%;
        position: relative;
        z-index: 3;
      }
      .slider-fill {
        position: absolute;
        top: 50%;
        left: 0;
        height: 4px;
        background-color: var(--color-three);
        pointer-events: none;
        transform: translateY(-50%);
        z-index: 3;
      }
      #result,
      .image-preview {
        margin-top: 20px;
      }
      .image-preview {
        display: flex;
        justify-content: space-between;
      }
      .image-preview img {
        max-width: 45%;
        height: auto;
      }
      .supported-formats {
        text-align: center;
        margin-top: 20px;
        font-style: italic;
      }
      .value-input::-webkit-inner-spin-button,
      .value-input::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      .value-input {
        appearance: textfield;
        -moz-appearance: textfield;
      }
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 1px, 1px);
        white-space: nowrap;
        border: 0;
      }
    </style>
  </head>
  <body>
    <header>
      <nav class="navbar">
        <div class="navbar-container">
          <img
            src="../../assets/icons/codedge-logo.svg"
            alt="Logo codedge"
            class="logo"
            width="80"
            height="35"
          />
          <h1 class="resize-text">
            <i class="fas fa-compress-arrows-alt" aria-hidden="true"></i>
            Compressore Immagini online
          </h1>
          <div class="menu-icon">
            <span class="bar"></span> <span class="bar"></span>
            <span class="bar"></span>
          </div>
          <ul id="nav-menu" class="nav-menu"></ul>
        </div>
      </nav>
      <div id="breadcrumb-container" aria-hidden="false"></div>
      <script src="../../js/components/breadcrumb-loader.js" defer=""></script>
    </header>
    <h2>Ottimizza JPG PNG WebP AVIF per il web</h2>
    <main>
      <div class="container">
        <div class="upload-area" id="uploadArea">
          <p>Trascina qui la tua immagine o clicca per selezionare</p>
          <input
            type="file"
            id="fileInput"
            accept="image/jpeg,image/png,image/webp,image/avif"
          />
        </div>
        <div class="options">
          <div class="option-row">
            <span class="option-label">Output:</span>
            <label for="outputFormat" class="sr-only">Formato di uscita</label>
            <select id="outputFormat">
              <option value="jpeg">JPEG</option>
              <option value="png">PNG</option>
              <option value="webp">WebP</option>
              <option value="avif">AVIF</option>
            </select>
            <button class="button-simple" id="saveToButton">Save to</button>
          </div>
          <div class="option-row">
            <span class="option-label">Quality:</span>
            <div class="slider-container">
              <label for="qualityValue" class="sr-only"
                >Valore qualità (%)</label
              >
              <input
                id="qualityValue"
                class="value-input"
                min="10"
                max="100"
                value="75%"
              />
              <div class="slider-wrapper">
                <label for="quality" class="sr-only"
                  >Qualità immagine (%)</label
                >
                <input
                  type="range"
                  id="quality"
                  class="slider"
                  min="10"
                  max="100"
                  value="75"
                  step="1"
                />
                <div class="slider-fill" id="qualityFill"></div>
              </div>
            </div>
          </div>
          <div class="option-row">
            <span class="option-label">Width:</span>
            <div class="slider-container">
              <label for="maxWidthValue" class="sr-only"
                >Larghezza massima (px)</label
              >
              <input
                id="maxWidthValue"
                class="value-input"
                min="100"
                max="1920"
                value="1920px"
              />
              <div class="slider-wrapper">
                <label for="maxWidth" class="sr-only"
                  >Larghezza massima immagine (px)</label
                >
                <input
                  type="range"
                  id="maxWidth"
                  class="slider"
                  min="100"
                  max="1920"
                  value="1920"
                  step="1"
                />
                <div class="slider-fill" id="maxWidthFill"></div>
              </div>
            </div>
          </div>
        </div>
        <button class="button-simple" id="compressBtn">
          Comprimi e Converti Immagine
        </button>
        <div id="result"></div>
        <div class="image-preview">
          <div id="originalImageContainer"></div>
          <div id="compressedImageContainer"></div>
        </div>
        <p class="supported-formats">
          Formati supportati: JPEG, PNG, WebP, AVIF
        </p>
      </div>
    </main>
    <script>
      const fileInput = document.getElementById("fileInput"),
        uploadArea = document.getElementById("uploadArea"),
        compressBtn = document.getElementById("compressBtn"),
        result = document.getElementById("result"),
        originalImageContainer = document.getElementById(
          "originalImageContainer",
        ),
        compressedImageContainer = document.getElementById(
          "compressedImageContainer",
        ),
        outputFormat = document.getElementById("outputFormat"),
        qualitySlider = document.getElementById("quality"),
        maxWidthSlider = document.getElementById("maxWidth"),
        qualityFill = document.getElementById("qualityFill"),
        maxWidthFill = document.getElementById("maxWidthFill"),
        qualityValueInput = document.getElementById("qualityValue"),
        maxWidthValueInput = document.getElementById("maxWidthValue"),
        saveToButton = document.getElementById("saveToButton");
      let compressedImageBlob = null;
      function handleFiles(e) {
        e.length > 0 &&
          ((compressBtn.disabled = !1), displayOriginalImage(e[0]));
      }
      function displayOriginalImage(e) {
        const t = new FileReader();
        ((t.onload = (t) => {
          const a = new Image();
          ((a.onload = function () {
            const a = e.type.split("/")[1].toUpperCase();
            originalImageContainer.innerHTML = `\n                        <img src="${t.target.result}" alt="Immagine originale">\n                        <p>Originale (${a}): ${(e.size / 1024).toFixed(2)} KB</p>\n                        <p>Risoluzione: ${this.width} x ${this.height} px</p>\n                    `;
          }),
            (a.src = t.target.result));
        }),
          t.readAsDataURL(e));
      }
      function displayCompressedImage(e) {
        const t = new FileReader();
        ((t.onload = (t) => {
          const a = new Image();
          ((a.onload = function () {
            compressedImageContainer.innerHTML = `\n                        <img src="${t.target.result}" alt="Immagine compressa">\n                        <p>Compressa (${outputFormat.value.toUpperCase()}): ${(e.size / 1024).toFixed(2)} KB</p>\n                        <p>Risoluzione: ${this.width} x ${this.height} px</p>\n                    `;
          }),
            (a.src = t.target.result));
        }),
          t.readAsDataURL(e));
      }
      async function compressAndConvertImage() {
        const e = fileInput.files[0];
        if (e)
          try {
            result.textContent = "Compressione e conversione in corso...";
            const t = parseFloat(qualitySlider.value) / 100,
              a = parseInt(maxWidthSlider.value);
            new Compressor(e, {
              quality: t,
              maxWidth: a,
              mimeType: `image/${outputFormat.value}`,
              success(t) {
                (t.size < e.size
                  ? ((compressedImageBlob = t),
                    displayCompressedImage(t),
                    (result.textContent = `Operazione completata! Dimensione ridotta da ${(e.size / 1024).toFixed(2)} KB a ${(t.size / 1024).toFixed(2)} KB`))
                  : ((compressedImageBlob = e),
                    displayCompressedImage(e),
                    (result.textContent = `La dimensione dell'immagine originale è stata mantenuta poiché qualità e larghezza sono invariati. Dimensione: ${(e.size / 1024).toFixed(2)} KB`)),
                  (saveToButton.disabled = !1));
              },
              error(e) {
                ((result.textContent =
                  "Errore durante l'elaborazione: " + e.message),
                  (saveToButton.disabled = !0));
              },
            });
          } catch (e) {
            ((result.textContent =
              "Errore durante l'elaborazione: " + e.message),
              (saveToButton.disabled = !0));
          }
      }
      function saveCompressedImage() {
        if (compressedImageBlob) {
          const e = document.createElement("a");
          ((e.href = URL.createObjectURL(compressedImageBlob)),
            (e.download = `compressed_image.${outputFormat.value}`),
            document.body.appendChild(e),
            e.click(),
            document.body.removeChild(e));
        }
      }
      function updateSliderFill(e, t) {
        const a = ((e.value - e.min) / (e.max - e.min)) * 100;
        t.style.width = `${a}%`;
      }
      function setupSlider(e, t, a, n) {
        function updateValue(l) {
          ((l = parseFloat(l)),
            (e.value = l),
            (a.value = l + n),
            updateSliderFill(e, t));
        }
        (e.addEventListener("input", () => updateValue(e.value)),
          a.addEventListener("change", function () {
            let t = parseFloat(this.value);
            ((t = isNaN(t)
              ? parseFloat(e.value)
              : Math.min(Math.max(t, parseFloat(e.min)), parseFloat(e.max))),
              updateValue(t));
          }),
          updateValue(e.value));
      }
      (uploadArea.addEventListener("click", () => fileInput.click()),
        uploadArea.addEventListener("dragover", (e) => {
          (e.preventDefault(), (uploadArea.style.backgroundColor = "#2a2a2a"));
        }),
        uploadArea.addEventListener("dragleave", () => {
          uploadArea.style.backgroundColor = "";
        }),
        uploadArea.addEventListener("drop", (e) => {
          (e.preventDefault(),
            (uploadArea.style.backgroundColor = ""),
            handleFiles(e.dataTransfer.files));
        }),
        fileInput.addEventListener("change", (e) =>
          handleFiles(e.target.files),
        ),
        compressBtn.addEventListener("click", compressAndConvertImage),
        saveToButton.addEventListener("click", saveCompressedImage),
        setupSlider(qualitySlider, qualityFill, qualityValueInput, "%"),
        setupSlider(maxWidthSlider, maxWidthFill, maxWidthValueInput, "px"),
        (saveToButton.disabled = !0));
    </script>
  </body>
</html>
